<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üìÖ Tahmin Ge√ßmi≈üi - BettingSukru</title>
  <style>
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      background: #f4f6fa;
      color: #222;
      margin: 0;
      padding: 20px;
    }

    h1 {
      text-align: center;
      color: #004d80;
      margin-bottom: 10px;
    }

    .date-selector {
      text-align: center;
      margin-bottom: 25px;
    }

    select {
      padding: 8px;
      font-size: 15px;
      border: 1px solid #ccc;
      border-radius: 6px;
      background: #fff;
    }

    /* Ma√ß kartlarƒ± */
    .history-container {
      max-width: 750px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .match-card {
      background: #fff;
      border: 1px solid #dce3ec;
      border-radius: 10px;
      padding: 14px 16px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .match-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 10px rgba(0,0,0,0.12);
    }

    .match-header {
      font-weight: 700;
      color: #003366;
      font-size: 1.05em;
      margin-bottom: 6px;
    }

    .match-info {
      font-size: 0.9em;
      color: #555;
      margin-bottom: 10px;
    }

    .score {
      font-weight: 600;
      color: #111;
    }

    .picks {
      margin-top: 8px;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .pick-line {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: #f8fafc;
      padding: 6px 10px;
      border-radius: 6px;
      font-size: 0.9em;
      border: 1px solid #e2e6eb;
    }

    .pick-label {
      font-weight: 600;
      color: #003366;
    }

    .status {
      display: inline-block;
      padding: 3px 8px;
      border-radius: 6px;
      font-size: 0.85em;
      font-weight: 600;
      color: white;
      min-width: 60px;
      text-align: center;
    }

    .won { background: #28a745; }
    .lost { background: #f75270; }
    .pending { background: #ffc107; color: #222; }

    footer {
      text-align: center;
      font-size: 0.85em;
      color: #777;
      margin-top: 30px;
    }

    @media (max-width: 600px) {
      body { padding: 10px; }
      .match-card { padding: 10px; }
    }
  </style>
</head>
<body>
  <h1>üìÖ Tahmin Ge√ßmi≈üi</h1>
  <div class="date-selector">
    <label for="dateSelect">Tarih Se√ß:</label>
    <select id="dateSelect"></select>
  </div>

  <div id="historyContainer" class="history-container">
    <p style="text-align:center; color:#777;">Veri y√ºkleniyor...</p>
  </div>

  <footer>
    Bu veriler ge√ßmi≈ü tahmin sonu√ßlarƒ±ndan otomatik olarak olu≈üturulmu≈ütur.<br>
    <small>¬© 2025 BettingSukru</small>
  </footer>

  <script>
    const select = document.getElementById('dateSelect');
    const container = document.getElementById('historyContainer');

    // Son 7 g√ºn√º ekle
    const today = new Date();
    for (let i = 0; i < 7; i++) {
      const d = new Date(today);
      d.setDate(today.getDate() - i);
      const str = d.toISOString().slice(0,10);
      const opt = document.createElement('option');
      opt.value = str;
      opt.textContent = str;
      select.appendChild(opt);
    }

    async function loadHistory(date) {
      const url = `data/${date}.json`;
      container.innerHTML = "<p style='text-align:center; color:#777;'>Veri y√ºkleniyor...</p>";

      try {
        const res = await fetch(url);
        if (!res.ok) throw new Error("JSON bulunamadƒ±");
        const data = await res.json();
        renderHistory(data);
      } catch (err) {
        container.innerHTML = `<p style='text-align:center; color:#b00;'>${date} i√ßin veri bulunamadƒ±.</p>`;
      }
    }

    function renderHistory(data) {
      if (!data || data.length === 0) {
        container.innerHTML = "<p style='text-align:center; color:#999;'>Bu tarih i√ßin veri bulunamadƒ±.</p>";
        return;
      }
    
      container.innerHTML = "";
      // üîπ Saya√ßlarƒ± ekle
      let wonCount = 0, lostCount = 0, pendingCount = 0;
      let totalPicks = 0;
    
      data.forEach(match => {
        const div = document.createElement('div');
        div.className = 'match-card';
    
        const score = match.score || "-";
        const picks = Array.isArray(match.picks) ? match.picks : [match.pick];
    
        let picksHtml = picks.map(p => {
          const st = match.statuses && match.statuses[p]
            ? match.statuses[p]
            : match.status || "pending";
    
          const statusClass = st === "won" ? "won" : (st === "lost" ? "lost" : "pending");
          const statusText = st === "won" ? "‚úÖ" : (st === "lost" ? "‚ùå" : "‚è≥");
    
          // üîπ istatistik saya√ßlarƒ± artƒ±r
          totalPicks++;
          if (st === "won") wonCount++;
          else if (st === "lost") lostCount++;
          else pendingCount++;
    
          return `<div class="pick-line">
                    <span class="pick-label">${p}</span>
                    <span class="status ${statusClass}">${statusText}</span>
                  </div>`;
        }).join("");
    
        div.innerHTML = `
          <div class="match-header">${match.homeTeam} - ${match.awayTeam}</div>
          <div class="match-info">
            <strong>Skor:</strong> <span class="score">${score}</span>
          </div>
          <div class="picks">${picksHtml}</div>
        `;
        container.appendChild(div);
      });
    
      // üîπ En alta istatistik kutusu
      const statsDiv = document.createElement('div');
      statsDiv.style.textAlign = "center";
      statsDiv.style.marginTop = "25px";
      statsDiv.style.padding = "10px";
      statsDiv.style.background = "#fff";
      statsDiv.style.border = "1px solid #dce3ec";
      statsDiv.style.borderRadius = "8px";
      statsDiv.style.boxShadow = "0 2px 6px rgba(0,0,0,0.08)";
      statsDiv.style.fontWeight = "600";
      statsDiv.style.color = "#003366";
    
      const successRate = totalPicks > 0 ? ((wonCount / totalPicks) * 100).toFixed(1) : 0;
    
      statsDiv.innerHTML = `
        üìä <strong>Toplam ${totalPicks} tahmin</strong><br>
        ‚úÖ ${wonCount} | ‚ùå ${lostCount} | ‚è≥ ${pendingCount}<br>
        <span style="color:#28a745;">Ba≈üarƒ± oranƒ±: %${successRate}</span>
      `;
    
      container.appendChild(statsDiv);
    }


    select.addEventListener('change', e => loadHistory(e.target.value));

    loadHistory(select.value);
  </script>
</body>
</html>
